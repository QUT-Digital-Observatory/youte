<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>youte - youte: Collecting YouTube video metadata and comments</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/youte-logo-black-transparent.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/youte-logo-white-transparent-1x.png" alt="" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./documentation.html">Documentation</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./tutorial.html" aria-current="page">Tutorial</a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/QUT-Digital-Observatory/youte"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#about-this-tutorial" id="toc-about-this-tutorial" class="nav-link active" data-scroll-target="#about-this-tutorial">About this tutorial</a></li>
  <li><a href="#about-youte" id="toc-about-youte" class="nav-link" data-scroll-target="#about-youte">About <code>youte</code></a>
  <ul class="collapse">
  <li><a href="#youtube-data-api" id="toc-youtube-data-api" class="nav-link" data-scroll-target="#youtube-data-api">YouTube Data API</a></li>
  <li><a href="#command-line" id="toc-command-line" class="nav-link" data-scroll-target="#command-line">Command-line</a></li>
  </ul></li>
  <li><a href="#installing-youte" id="toc-installing-youte" class="nav-link" data-scroll-target="#installing-youte">Installing youte</a>
  <ul class="collapse">
  <li><a href="#issues-installing-youte-in-anaconda" id="toc-issues-installing-youte-in-anaconda" class="nav-link" data-scroll-target="#issues-installing-youte-in-anaconda">Issues installing <code>youte</code> in Anaconda</a></li>
  </ul></li>
  <li><a href="#set-up" id="toc-set-up" class="nav-link" data-scroll-target="#set-up">Set up</a>
  <ul class="collapse">
  <li><a href="#youtube-api-key" id="toc-youtube-api-key" class="nav-link" data-scroll-target="#youtube-api-key">YouTube API Key</a></li>
  <li><a href="#configure-api-key-in-youte-optional" id="toc-configure-api-key-in-youte-optional" class="nav-link" data-scroll-target="#configure-api-key-in-youte-optional">Configure API key in youte (optional)</a></li>
  </ul></li>
  <li><a href="#run-a-search" id="toc-run-a-search" class="nav-link" data-scroll-target="#run-a-search">Run a search</a>
  <ul class="collapse">
  <li><a href="#search-options" id="toc-search-options" class="nav-link" data-scroll-target="#search-options">Search options</a></li>
  <li><a href="#save-search-progress" id="toc-save-search-progress" class="nav-link" data-scroll-target="#save-search-progress">Save search progress</a></li>
  <li><a href="#export-to-csv" id="toc-export-to-csv" class="nav-link" data-scroll-target="#export-to-csv">Export to CSV</a></li>
  </ul></li>
  <li><a href="#retrieve-data-about-videos-or-channels" id="toc-retrieve-data-about-videos-or-channels" class="nav-link" data-scroll-target="#retrieve-data-about-videos-or-channels">Retrieve data about videos or channels</a>
  <ul class="collapse">
  <li><a href="#videos" id="toc-videos" class="nav-link" data-scroll-target="#videos">Videos</a></li>
  <li><a href="#channels" id="toc-channels" class="nav-link" data-scroll-target="#channels">Channels</a></li>
  <li><a href="#extract-ids-from-youte-data" id="toc-extract-ids-from-youte-data" class="nav-link" data-scroll-target="#extract-ids-from-youte-data">Extract IDs from youte data</a></li>
  </ul></li>
  <li><a href="#get-comments" id="toc-get-comments" class="nav-link" data-scroll-target="#get-comments">Get comments</a></li>
  <li><a href="#tidy-data-into-a-relational-database" id="toc-tidy-data-into-a-relational-database" class="nav-link" data-scroll-target="#tidy-data-into-a-relational-database">Tidy data into a relational database</a>
  <ul class="collapse">
  <li><a href="#json-format" id="toc-json-format" class="nav-link" data-scroll-target="#json-format">JSON format</a></li>
  <li><a href="#relational-database" id="toc-relational-database" class="nav-link" data-scroll-target="#relational-database">Relational database</a></li>
  <li><a href="#working-with-databases-in-r-and-python" id="toc-working-with-databases-in-r-and-python" class="nav-link" data-scroll-target="#working-with-databases-in-r-and-python">Working with databases in R and Python</a></li>
  </ul></li>
  <li><a href="#feedback-is-welcome" id="toc-feedback-is-welcome" class="nav-link" data-scroll-target="#feedback-is-welcome">Feedback is welcome!</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/QUT-Digital-Observatory/youte/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">youte: Collecting YouTube video metadata and comments</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="about-this-tutorial" class="level3">
<h3 class="anchored" data-anchor-id="about-this-tutorial">About this tutorial</h3>
<p>This tutorial provides a quick tour of <code>youte</code> and how you can use it to query basic data from YouTube. Familiarity with using the terminal is recommended, although we will try to cover enough of the basics of command-line interface and APIs for you to use <code>youte</code>.</p>
</section>
<section id="about-youte" class="level2">
<h2 class="anchored" data-anchor-id="about-youte">About <code>youte</code></h2>
<p><code>youte</code> is a helper library that interacts with <a href="https://developers.google.com/youtube/v3">YouTube Data API</a>. Effectively, it makes working with YouTube API and collecting YouTube metadata and comments easy and intuitive. <code>youte</code> is primarily run as a command-line tool.</p>
<p><code>youte</code> is currently actively developed and new capabilities are being added at the present. Keep an eye out for new releases on our <a href="https://github.com/QUT-Digital-Observatory/youte">GitHub page</a>.</p>
<section id="youtube-data-api" class="level3">
<h3 class="anchored" data-anchor-id="youtube-data-api">YouTube Data API</h3>
<p>As under the hood, <code>youte</code> interacts with YouTube Data API, a quick reminder of what an API is might be useful, although not critical for you to use <code>youte</code>. In short, an <em>Application Programming Interface</em> or <em>API</em> is a set of communication protocols that help two programs or applications talk to each other. According to this protocol, you send a request to the API, and the API returns a response code to tell you whether your request was valid, and a response body that contains the data requested.</p>
<p>As an API, <a href="https://developers.google.com/youtube/v3/getting-started">YouTube Data API</a> allows you to get the information for a wide range of resources. A YouTube <a href="https://developers.google.com/youtube/v3/getting-started#resources"><em>resource</em></a> is an entity that makes up the YouTube experience, including video, channel, playlist, comment, and search results. Each resource has a unique ID given by YouTube. These IDs will come in handy when you query data from YouTube API.</p>
<p>The API also allows you to update, delete or create YouTube resources, although as a data collection tool, <code>youte</code> currently does not support these operations.</p>
</section>
<section id="command-line" class="level3">
<h3 class="anchored" data-anchor-id="command-line">Command-line</h3>
<p>We mentioned that <code>youte</code> is a command-line tool. So what is a command line? A <em>command line</em>, or the <em>shell</em>, is an interface that takes textual, keyboard commands and passes them to your computer for execution.</p>
<p>A variety of shells are used across operating systems. Some common ones are listed below:</p>
<ul>
<li><p>Windows: Command Prompt (cmd), Powershell, Git Bash</p></li>
<li><p>Linux &amp; Mac OS: Bash, Zsh</p></li>
</ul>
<p>Apart from the very basic, We do not go in-depth on shell commands and how to use the shell in this tutorial. If you need a quick introduction of how the shell works, <a href="https://swcarpentry.github.io/shell-novice/">this guide</a> is a useful resource.</p>
<p><strong>Code display convention</strong>: Shell commands in this tutorial are displayed as codes with a dollar ($) sign in front of them. When copying the code to your own terminal, make sure to omit the dollar sign.</p>
</section>
</section>
<section id="installing-youte" class="level2">
<h2 class="anchored" data-anchor-id="installing-youte">Installing youte</h2>
<p>In this tutorial, we’ll be using the Bash shell. The Bash shell is already the default shell in Mac OS and Linux. Open the Terminal app in your Mac OS or Linux to get to the shell.</p>
<p>Windows users can install and use <a href="https://gitforwindows.org/">Git Bash</a> or <a href="https://learn.microsoft.com/en-us/windows/wsl/install">Windows Subsystem for Linux</a> to access the Bash shell.</p>
<p>Once your terminal is open, to install youte, run this command in your shell:</p>
<pre class="shell"><code>$ python -m pip install youte</code></pre>
<p><code>youte</code> can work with Python 3.8 and above, so make sure you check your Python version before installing.</p>
<p>To check that you’ve installed youte successfully, run:</p>
<pre class="shell"><code>$ youte --version</code></pre>
<p>If everything is installed properly, the command will print out the version number of youte.</p>
<section id="issues-installing-youte-in-anaconda" class="level3">
<h3 class="anchored" data-anchor-id="issues-installing-youte-in-anaconda">Issues installing <code>youte</code> in Anaconda</h3>
<p>If you use Anaconda’s distribution of Python, there might be issues installing and using <code>youte</code>. The below solutions have been tried and shown to work:</p>
<ul>
<li><p>If you install <code>youte</code> in the base environment (i.e.&nbsp;not in a virtual environment), run <code>youte</code> in Anaconda Prompt as opposed to other shells.</p></li>
<li><p>You can install <code>youte</code> in a virtual environment and run it in that virtual environment. Refer to this <a href="https://python.land/virtual-environments/virtualenv">guide</a> for a quick walk-through on how to create and activate a Python virtual environment.</p></li>
</ul>
</section>
</section>
<section id="set-up" class="level2">
<h2 class="anchored" data-anchor-id="set-up">Set up</h2>
<section id="youtube-api-key" class="level3">
<h3 class="anchored" data-anchor-id="youtube-api-key">YouTube API Key</h3>
<p>To get started, you will need a YouTube API key. Obtaining an API key is simple and straightforward, but you will need a Google account to do so. Instructions for getting an API key are described <a href="https://developers.google.com/youtube/v3/getting-started">here</a>.</p>
</section>
<section id="configure-api-key-in-youte-optional" class="level3">
<h3 class="anchored" data-anchor-id="configure-api-key-in-youte-optional">Configure API key in youte (optional)</h3>
<p>All <code>youte</code> commands that retrieve data from YouTube require you to input your API key each time you run them. Alternatively, you can store your API key in <code>youte</code>, so that you won’t have to repeatedly specify an API key. You do so by entering this command in the shell:</p>
<pre class="shell"><code>$ youte config add-key</code></pre>
<p>The interactive prompt will ask you to enter your API key and give it a name. The name will be used to specify the API key, and it can be anything you choose. This will save you the trouble of having to enter the API key every time you query data from YouTube - all you need is the key’s name.</p>
<p>You can also set a key as the default key. If there is a default key, it will be used automatically every time you run a query.</p>
<p>Behind the scenes, <code>config add-key</code> stores your API key in a config file which <code>youte</code> will refer to when running queries.</p>
<p>To see a list of all stored keys, run:</p>
<pre class="shell"><code>$ youte config list-keys</code></pre>
<p>To manually set a stored key as a default, run:</p>
<pre class="shell"><code>$ youte config set-default &lt;NAME-OF-KEY&gt;</code></pre>
<p>Here you specify the <em>name</em> of the API key you want to set as default.</p>
<p>To remove an API key from <code>youte</code>, run:</p>
<pre class="shell"><code>$ youte config remove &lt;NAME-OF-KEY&gt;</code></pre>
</section>
</section>
<section id="run-a-search" class="level2">
<h2 class="anchored" data-anchor-id="run-a-search">Run a search</h2>
<p>Now, onto the exciting part. Let’s run a search!</p>
<p>Similarly to doing a YouTube search, <code>youte search</code> allows you to do get a list of videos matching keywords and other specified criteria. <code>youte</code> does not return audiovisual content, just the metadata such as video titles and descriptions.</p>
<p>Here is the format of <code>youte search</code> command.</p>
<pre class="shell"><code>$ youte search &lt;QUERY&gt;</code></pre>
<p>Let’s do a search for videos on salmon recipes:</p>
<pre class="shell"><code>$ youte search "salmon recipes"</code></pre>
<p>Notice the quotes around “salmon recipes”. Spacing is important in shell commands. Therefore, if there is any space in your search term, wrap everything inside quotes.</p>
<p>The results of this command will be printed to the terminal. You’ll observe that the results are very difficult to see.</p>
<p><img src="images/youte_search_results.png" class="img-fluid"></p>
<p>This is because YouTube API returns data as a bunch of <strong>JSON</strong>, the standard format for data exchange between systems or applications. While the JSON contains a lot of useful information, in this format it is impossible to analyse and interpret.</p>
<p>Instead, we can store the JSON in a file, to easily process it later using JSON-processing tools.</p>
<pre class="shell"><code>$ youte search "salmon recipes" salmon_recipes_search.json</code></pre>
<p>By specify the name of the file (“salmon_recipes_search.json”) at the end of the command, you instruct <code>youte</code> to store the results in that file, rather than print them out on the shell. The file has to have a <code>.json</code> ending.</p>
<section id="search-options" class="level3">
<h3 class="anchored" data-anchor-id="search-options">Search options</h3>
<p>Now, that search is pretty broad. What if you only want videos uploaded within a specific period? The <code>--from</code> and <code>--to</code> options let you specify the time videos are published. Let’s specify that we only want salmon recipes videos uploaded within the last month.</p>
<p>Note that shell commands have to be typed in one line. The backlashes (\) are used to enter a new line without breaking the command and help with readability.</p>
<pre class="shell"><code>$ youte search "salmon recipes" salmon_recipes_search.json \
    --from 2023-01-01 \
    --to 2023-01-31</code></pre>
<p>The date has to be in YYYY-MM-DD format, otherwise you will get an error.</p>
<p>Let’s refine our search a bit further. Let’s search for short videos that are under 4 minutes.</p>
<pre class="shell"><code>$ youte search "salmon recipes" salmon_recipes_search.json \
    --from 2023-01-01 \
    --to 2023-01-31 \
    --video-duration short</code></pre>
<p>Besides the above, there is a range of options that you can specify to further narrow your search. To get a full list of available options, specify the flag <code>--help</code>.</p>
<pre class="shell"><code>$ youte search --help</code></pre>
<p>The <code>--help</code> flag shows the documentation for a command, so that’s usually the first place to go to if you want to know how to use a command.</p>
</section>
<section id="save-search-progress" class="level3">
<h3 class="anchored" data-anchor-id="save-search-progress">Save search progress</h3>
<p>Often there is a limit to how much data you get from YouTube API per day. Searching, in particular, is very “expensive” in terms of API usage. Therefore, you can choose to save the progress of a search so that if you exit the program prematurely, either by accident or on purpose, you can resume the search to avoid wasting valuable quota units.</p>
<p>Specifically, when you exit the program in the middle of a search, a prompt will ask if you want to save its progress. If yes, progress of the search is saved in a database, whose name is displayed in the shell along with instructions on how to resume progress from this database.</p>
<p><img src="images/youte_save_progress.png" class="img-fluid"></p>
<p>To resume progress from a database, add the <code>--resume</code> flag followed by the name of the progress file.</p>
<pre class="shell"><code>$ youte search "salmon recipes" salmon_recipes_search.json \
    --from 2023-01-01 \
    --to 2023-01-31 \
    --video-duration short \
    --resume search_1675381044</code></pre>
<p>The progress file is automatically deleted once youte has completed collecting all data for a search.</p>
</section>
<section id="export-to-csv" class="level3">
<h3 class="anchored" data-anchor-id="export-to-csv">Export to CSV</h3>
<p>Another useful feature in youte is processing your results into a tidy CSV. To do so, specify the tag <code>--to-csv</code> followed by the name of the CSV file.</p>
<pre class="shell"><code>$ youte search "salmon recipes" salmon_recipes_search.json \
    --from 2023-01-01 \
    --to 2023-01-31 \
    --video-duration short \
    --resume search_1675381044 \
    --to-csv salmon_recipes_search.csv</code></pre>
<p>Now you have the raw JSON file, as well as a tidy CSV file which can then be easily plugged into analysis software.</p>
</section>
</section>
<section id="retrieve-data-about-videos-or-channels" class="level2">
<h2 class="anchored" data-anchor-id="retrieve-data-about-videos-or-channels">Retrieve data about videos or channels</h2>
<section id="videos" class="level3">
<h3 class="anchored" data-anchor-id="videos">Videos</h3>
<p>Now, if you look at the search results returned from <code>youte search</code>, you’ll see that they contain only a few fields of information. For example, video statistics are not provided, and video descriptions are truncated.</p>
<p><code>youte search</code> only returns some data. Thus, if you want to get full data on a set of videos or channels you will need to use <code>hydrate</code>. <em>Hydrating</em> is a concept taken from Twitter API, which means retrieving the data about videos or channels using their IDs.</p>
<p><code>youte hydrate</code> command takes as input a list of video or channel IDs and retrieves information on those. Each YouTube resource (video, channel, comment) is assigned a unique identifier. You can get the ID of a video in the URL or within the data returned by YouTube Data API. For example, the ID of a YouTube video can be found in the video’s URL:</p>
<p>https://www.youtube.com/watch?v=<strong>5MXTcO1veRQ</strong></p>
<p>Now let’s hydrate this video. By default, <code>youte hydrate</code> takes the IDs as video IDs and return video information. So you can hydrate one video easily with:</p>
<pre class="shell"><code>$ youte hydrate 5MXTcO1veRQ</code></pre>
<p>You can also hydrate multiple videos and store results in a file:</p>
<pre class="shell"><code>$ youte hydrate 5MXTcO1veRQ cbAj3biUeDI dTI3I9ZFzTI videos.json</code></pre>
<p>If you have a long list of IDs, you can put them all in text file, each ID on a new line, and instruct <code>youte hydrate</code> to use that file by specifying the <code>-f</code> flag.</p>
<pre class="shell"><code>$ youte hydrate -f video_ids.txt videos.json</code></pre>
</section>
<section id="channels" class="level3">
<h3 class="anchored" data-anchor-id="channels">Channels</h3>
<p>If you want to hydrate a list of channel IDs, pass the <code>--channel</code> flag.</p>
<p>Hydrate 1 channel ID:</p>
<pre class="shell"><code>$ youte hydrate --channel UC3mORGO2XYSn3Y_BUPuazeQ</code></pre>
<p>Hydrate multiple channel IDs:</p>
<pre class="shell"><code>$ youte hydrate --channel UCC-jcZTFL1r17E-bEC7VYYA UC3mORGO2XYSn3Y_BUPuazeQ</code></pre>
<section id="working-with-channel-ids" class="level4">
<h4 class="anchored" data-anchor-id="working-with-channel-ids">Working with channel IDs</h4>
<p>Similar to video IDs, channel IDs can be found in the channels’ URLs (https://www.youtube.com/channel/<strong>UC3mORGO2XYSn3Y_BUPuazeQ</strong>).</p>
<p>However, most often channel IDs will be more difficult to find because YouTube channels can have custom names and URLs (e.g.&nbsp;https://www.youtube.com/c/<strong>AmbitionMusic</strong>), or older channels might have a different URL (e.g.&nbsp;https://www.youtube.com/user/QueenAnime141). These custom names won’t be able to hydrate.</p>
<p>Therefore, the best way to get channel IDs is in the search results from <code>youte search</code>.</p>
</section>
</section>
<section id="extract-ids-from-youte-data" class="level3">
<h3 class="anchored" data-anchor-id="extract-ids-from-youte-data">Extract IDs from youte data</h3>
<p>More often, you want to do a youte search of relevant videos, then retrieve the full data on those videos, instead of copying and pasting video IDs from the URLs. <code>youte dehydrate</code> provides a quick way to extract the IDs from the JSON resulted by youte search, and store them in a text file.</p>
<p>Say you have done a youte search for “salmon recipes” and stored the JSON result in <code>salmon_recipes_search.json</code>. Let’s get the IDs of all videos within that data, and store it in a file <code>salmon_ids.csv</code>.</p>
<pre class="shell"><code>youte dehydrate salmon_recipes_search.json --output salmon_ids.csv</code></pre>
<p>Now you can use <code>hydrate -f</code> to retrieve the full data for those videos.</p>
<pre class="shell"><code>youte hydrate -f salmon_ids.csv salmon_videos.json</code></pre>
</section>
</section>
<section id="get-comments" class="level2">
<h2 class="anchored" data-anchor-id="get-comments">Get comments</h2>
<p>If you’re interested in the conversation going in the comment section, <code>youte get-comments</code> retrieves the comment threads (top level comments) under a video or a list of videos. <code>youte get-comments</code> can also retrieve replies to those comment threads using the thread IDs.</p>
<p><code>get-comments</code> works similarly to <code>hydrate</code> in that it takes one or many video IDs or thread IDs, which can be input straight to the shell, or stored in a text file and referred to with the <code>-f</code> flag. The major difference is that you have to specify a flag to indicate whether IDs belong to videos or threads.</p>
<p>If the IDs are video IDs, pass the <code>-v</code> flag to indicate so.</p>
<pre class="shell"><code>$ youte get-comments -v 5MXTcO1veRQ cbAj3biUeDI dTI3I9ZFzTI</code></pre>
<p>One potential issue you might run into when running this command is if the video has comments disabled. In this case, the program will show a warning and skip to other IDs if there is any.</p>
<p>You can get the replies to a thread by running <code>get-comments</code> with the thread ID and passing <code>-t</code> to indicate the ID belongs to a thread, not a video.</p>
<p>In a browser, the thread ID can be seen if you hover your mouse over a comment’s timestamp. Or you can get the thread IDs from the data returned by <code>get-comments</code>.</p>
<p>https://www.youtube.com/watch?v=A-mO7rbYtgk&amp;lc=<strong>UgwTqVJTgz1gZl6X57Z4AaABAg</strong></p>
<pre class="shell"><code>$ youte get-comments -t UgwTqVJTgz1gZl6X57Z4AaABAg</code></pre>
<p>This command will return an empty JSON if there are no replies.</p>
</section>
<section id="tidy-data-into-a-relational-database" class="level2">
<h2 class="anchored" data-anchor-id="tidy-data-into-a-relational-database">Tidy data into a relational database</h2>
<section id="json-format" class="level3">
<h3 class="anchored" data-anchor-id="json-format">JSON format</h3>
<p>All data returned from <code>youte search</code>, <code>youte hydrate</code>, and <code>youte get-comments</code> are in JSON format.</p>
<p><em>What is JSON?</em></p>
<p><a href="https://www.w3schools.com/js/js_json_intro.asp">JSON</a> is the most common way for exchanging text data. Today it is the universal standard of data exchange because of its conciseness, versatility, and platform independence.</p>
<p>Here is an example of a JSON object.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"kind"</span><span class="fu">:</span> <span class="st">"youtube#searchResult"</span><span class="fu">,</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"etag"</span><span class="fu">:</span> <span class="st">"B_TxCObncAju-vhnFwKefxRoNRI"</span><span class="fu">,</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"kind"</span><span class="fu">:</span> <span class="st">"youtube#video"</span><span class="fu">,</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"videoId"</span><span class="fu">:</span> <span class="st">"SR2Mf27YweM"</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"snippet"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"publishedAt"</span><span class="fu">:</span> <span class="st">"2022-08-31T00:43:25Z"</span><span class="fu">,</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"channelId"</span><span class="fu">:</span> <span class="st">"UCnSc_XzYmAMMSJX4shj7ovw"</span><span class="fu">,</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"title"</span><span class="fu">:</span> <span class="st">"30/08/22 :: 9 HOURS STUDY WITH ME [PART-2/2] :: CA: UPSC: PCS: IIT: NEET: SSC: OTHER EXAMS"</span><span class="fu">,</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"description"</span><span class="fu">:</span> <span class="st">"Why is this channel ? As we know that to get good marks in any exam ,we have to study hard and for which consistency is ..."</span><span class="fu">,</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"thumbnails"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"default"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://i.ytimg.com/vi/SR2Mf27YweM/default.jpg"</span><span class="fu">,</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"width"</span><span class="fu">:</span> <span class="dv">120</span><span class="fu">,</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"height"</span><span class="fu">:</span> <span class="dv">90</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"medium"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://i.ytimg.com/vi/SR2Mf27YweM/mqdefault.jpg"</span><span class="fu">,</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"width"</span><span class="fu">:</span> <span class="dv">320</span><span class="fu">,</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"height"</span><span class="fu">:</span> <span class="dv">180</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"high"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"url"</span><span class="fu">:</span> <span class="st">"https://i.ytimg.com/vi/SR2Mf27YweM/hqdefault.jpg"</span><span class="fu">,</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"width"</span><span class="fu">:</span> <span class="dv">480</span><span class="fu">,</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"height"</span><span class="fu">:</span> <span class="dv">360</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"channelTitle"</span><span class="fu">:</span> <span class="st">"BE CONSISTENT"</span><span class="fu">,</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"liveBroadcastContent"</span><span class="fu">:</span> <span class="st">"none"</span><span class="fu">,</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"publishTime"</span><span class="fu">:</span> <span class="st">"2022-08-31T00:43:25Z"</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Everything inside a curly braces belongs to an object. An <em>object</em> is basically a thing or an entity. Within that object, you can have object properties or attributes, represented by key-value pairs. As shown in the example above, you can also have objects nested within objects.</p>
<p>As you can see, the JSON format is great for data exchange, but not for data analysis, for which you’ll probably need something closer to a table or spreadsheet. This is where <code>youte tidy</code> might come in handy, as it processes and transforms raw JSON files into a relational, SQLite database.</p>
</section>
<section id="relational-database" class="level3">
<h3 class="anchored" data-anchor-id="relational-database">Relational database</h3>
<p>A relational database contains tables of columns and rows. Each row represents an entity (object) and each column an attribute of that entity. So it looks very similar to your spreadsheet or CSV file. While you can export YouTube data to CSV format using <code>--to-csv</code> in most youte commands, there are cases where a relational database is more desirable. Relational databases are excellent in checking data redundancy and joining data. For example, you can have a <code>videos</code> table, a <code>channels</code> table, a <code>comments</code> table and combine them in multiple ways to get a fuller picture of the dataset.</p>
<p>SQLite is a light-weight database engine that stores an entire database within a <code>.db</code> file, making it easy to transfer and work with small-scale databases. Interacting with databases requires <a href="https://www.w3schools.com/sql/sql_intro.asp">SQL</a>, although there are tools and libraries that will minimise the amount of SQL you’ll need to read data.</p>
<p>Now, let’s see what <code>youte tidy</code> does. It takes in a single JSON file as input, and a <code>.db</code> file as output.</p>
<pre class="shell"><code>youte tidy &lt;INPUT-JSON&gt; &lt;OUTPUT-DB&gt;</code></pre>
<p>The JSON file should contain <strong><em>one</em></strong> type of resource (e.g.&nbsp;search result, video, channel, comment). And the output file must have a <code>.db</code> ending.</p>
<pre class="shell"><code>youte tidy salmon_videos.json salmon.db</code></pre>
</section>
<section id="working-with-databases-in-r-and-python" class="level3">
<h3 class="anchored" data-anchor-id="working-with-databases-in-r-and-python">Working with databases in R and Python</h3>
<section id="r" class="level4">
<h4 class="anchored" data-anchor-id="r">R</h4>
<p>There are many tools to work with SQlite files, in R and Python. In R, the <code>RSQLite</code> package offers a nice and easy way to interact and read data from <code>.db</code> files.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)     <span class="co"># for createing database connection</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RSQLite)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="st">"salmon.db"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con)             <span class="co"># list all tables in the database</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, <span class="st">"videos"</span>)  <span class="co"># get table `comments` to a dataframe</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="python" class="level4">
<h4 class="anchored" data-anchor-id="python">Python</h4>
<p>The <code>pandas</code> library offers some nice functions to connect with and read data from databases. pandas’ <code>read_sql_query</code> lets you query a database into a DataFrame.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sqlite3   <span class="co"># for creating connection with SQLite databases</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># connect to cleaned.db</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>con <span class="op">=</span> sqlite3.<span class="ex">connect</span>(<span class="st">"salmon.db"</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># read all data from table "comments" to a pandas DataFrame</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pandas.read_sql_query(<span class="st">"SELECT * FROM comments"</span>, con<span class="op">=</span>con)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="feedback-is-welcome" class="level2">
<h2 class="anchored" data-anchor-id="feedback-is-welcome">Feedback is welcome!</h2>
<p><code>youte</code> is still in its infancy, and we are working to improve and expand its capabilities. Extra documentation on <code>youte</code> can be found on our <a href="https://github.com/QUT-Digital-Observatory/youte">GitHub’s repository</a>. Let us know your feedback or suggestions by creating GitHub issues or emailing us at <a href="mailto:digitalobservatory@qut.edu.au">digitalobservatory@qut.edu.au</a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>